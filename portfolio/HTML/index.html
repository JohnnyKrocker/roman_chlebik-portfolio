<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portfolio 3D | Game Dev</title>
    <link rel="stylesheet" href="css/style.css">
    <style>
        .model-container {
            width: 100%;
            height: 70vh;
            position: relative;
            border: 1px solid #444;
            margin-bottom: 2rem;
        }
        #canvas3d {
            width: 100%;
            height: 100%;
            display: block;
        }
        .model-info {
            padding: 1rem;
            background: #f5f5f5;
            margin-top: 1rem;
        }
    </style>
</head>
<body>
    <header>
        <h1>Moje Portfolio 3D</h1>
        <p>Modele stworzone w Blenderze dla gier</p>
    </header>

    <main>
        <section class="gallery">
            <div class="model-card">
                <h2>Model 1</h2>
                <div class="model-container">
                    <canvas id="model1"></canvas>
                </div>
                <div class="model-info">
                    <p><strong>Techniki:</strong> PBR Texturing, Retopology</p>
                    <p><strong>Polycount:</strong> 12,500 tris</p>
                </div>
            </div>

            <div class="model-card">
                <h2>Model 2</h2>
                <div class="model-container">
                    <canvas id="model2"></canvas>
                </div>
                <div class="model-info">
                    <p><strong>Techniki:</strong> Sculpting, UV Unwrapping</p>
                    <p><strong>Polycount:</strong> 24,000 tris</p>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <p>© 2023 Twoje Portfolio | Kontakt: email@example.com</p>
    </footer>

    <!-- Three.js i zależności -->
    <script src="js/three.min.js"></script>
    <script src="js/GLTFLoader.js"></script>
    <script src="js/OrbitControls.js"></script>

    <script>
        // Funkcja inicjalizująca model
        function initModel(canvasId, modelPath) {
            const canvas = document.getElementById(canvasId);
            
            // Scena
            const scene = new THREE.Scene();
            scene.background = new THREE.Color(0xf0f0f0);
            
            // Kamera
            const camera = new THREE.PerspectiveCamera(
                75, 
                canvas.clientWidth / canvas.clientHeight, 
                0.1, 
                1000
            );
            camera.position.z = 5;
            
            // Renderer
            const renderer = new THREE.WebGLRenderer({
                canvas: canvas,
                antialias: true
            });
            renderer.setSize(canvas.clientWidth, canvas.clientHeight);
            
            // Oświetlenie
            const ambientLight = new THREE.AmbientLight(0xffffff, 0.5);
            scene.add(ambientLight);
            
            const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
            directionalLight.position.set(1, 1, 3);
            scene.add(directionalLight);
            
            // Kontrola myszą
            const controls = new THREE.OrbitControls(camera, canvas);
            controls.enableDamping = true;
            controls.dampingFactor = 0.05;
            
            // Ładowanie modelu
            const loader = new THREE.GLTFLoader();
            loader.load(
                modelPath,
                function(gltf) {
                    scene.add(gltf.scene);
                    
                    // Automatyczne skalowanie
                    const box = new THREE.Box3().setFromObject(gltf.scene);
                    const center = box.getCenter(new THREE.Vector3());
                    const size = box.getSize(new THREE.Vector3());
                    
                    gltf.scene.position.x += (gltf.scene.position.x - center.x);
                    gltf.scene.position.y += (gltf.scene.position.y - center.y);
                    gltf.scene.position.z += (gltf.scene.position.z - center.z);
                    
                    const maxDim = Math.max(size.x, size.y, size.z);
                    const scale = 3.0 / maxDim;
                    gltf.scene.scale.set(scale, scale, scale);
                },
                undefined,
                function(error) {
                    console.error('Błąd ładowania modelu:', error);
                }
            );
            
            // Animacja
            function animate() {
                requestAnimationFrame(animate);
                controls.update();
                renderer.render(scene, camera);
            }
            animate();
            
            // Responsywność
            window.addEventListener('resize', function() {
                camera.aspect = canvas.clientWidth / canvas.clientHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(canvas.clientWidth, canvas.clientHeight);
            });
        }
        
        // Inicjalizacja modeli po załadowaniu strony
        document.addEventListener('DOMContentLoaded', function() {
            initModel('model1', 'models/model-1.glb');
            initModel('model2', 'models/model-2.glb');
        });
    </script>
</body>
</html>